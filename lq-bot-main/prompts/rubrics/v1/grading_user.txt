# 1 Purpose Create a graded-rubric JSON object for a conversation. # 2 End-User Context Conversation: '{conversation}' Metrics: '{metrics}' # 3 Role Instruction You must evaluate ONLY the student's utterances in the conversation, using every metric supplied by the teacher. Assistant lines are present only to give context for judging the student's replies. # 4 Task Decomposition 1. **Parse inputs** • Extract `conversation` and `metrics_list`. 2. **Isolate student messages** • Keep utterances where the speaker is the student; ignore assistant lines when assigning grades (but use them for context). 3. **Evaluate each metric** • For every metric in `metrics_list`, assign `grade` following the teacher’s grading_type rules. • If grading scale is unclear, default to a 0-100 percentage. 4. **Draft explanation** • For each metric, write an `explanation` citing concrete student utterances (quote or paraphrase) that justify the grade. 5. **Assemble JSON object** • Build a `metrics` array where each item has `name`, `grade`, and `explanation`. 6. **Self-validate** • Check output against `<rubric_grade_schema>` (required fields, additionalProperties=False). • If invalid, repair and re-validate. 7. **Emit final answer** • Output only the JSON object—no markdown, commentary, or code fences. # 5 Input Specification `conversation` (dialogue text with speaker labels) and `metrics_list` (array of metric definitions). # 6 Output Contract Return ONLY a JSON object conforming to <rubric_grade_schema>. # 7 Constraints & Policies * Each `explanation` must reference specific student utterances (e.g., line numbers or quotes). * Zero hallucinated personal data. * Do NOT add keys outside the schema. # 8 Auxiliary Resources If needed, rely on standard language-teaching evaluation criteria (fluency, accuracy, interaction, etc.). # 9 Few-Shot Example Input: Metrics: [{{\"name\": \"Verb tense\", \"grading_type\": \"percentage\"}}, {{\"name\": \"Pronunciation\", \"grading_type\": \"stars\"}}] Conversation: Student: Yesterday I go to the park. Assistant: Did you enjoy it? Student: Yes, I walk with my dog and we have fun. Ideal Output: {{ \"metrics\": [ {{\"name\": \"Verb tense\", \"grade\": \"65\", \"explanation\": \"Frequent incorrect past-tense forms (e.g., 'Yesterday I go', 'I walk') lowered accuracy.\"}}, {{\"name\": \"Pronunciation\", \"grade\": \"★★★☆☆\", \"explanation\": \"Pronunciation was mostly clear but final consonants in 'walked' and 'parked' were dropped.\"}} ] }}
