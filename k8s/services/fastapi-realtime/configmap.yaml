# ==============================================================================
# CONFIGMAP: FastAPI Realtime - Configuration
# ==============================================================================

apiVersion: v1
kind: ConfigMap
metadata:
  name: fastapi-realtime-config
  namespace: lingoquesto
  labels:
    app: fastapi-realtime
    component: websocket
data:
  # App
  APP_NAME: "lq-realtime-service"
  APP_VERSION: "1.0.0"
  DEBUG: "false"
  ENVIRONMENT: "production"

  # Server
  HOST: "0.0.0.0"
  PORT: "8082"
  WORKERS: "1"

  # JWT
  JWT_ALGORITHM: "HS256"
  JWT_ACCESS_TOKEN_EXPIRE_MINUTES: "15"

  # Redis (CR√çTICO - sin Redis no funciona)
  REDIS_HOST: "redis"
  REDIS_PORT: "6379"
  REDIS_DB: "0"
  REDIS_PASSWORD: ""
  REDIS_SSL: "false"
  REDIS_MAX_CONNECTIONS: "100"

  # WebSocket
  WS_MAX_CONNECTIONS_PER_INSTANCE: "10000"
  WS_HEARTBEAT_INTERVAL: "30"
  WS_MESSAGE_MAX_SIZE: "65536"

  # Webhook
  WEBHOOK_MAX_RETRIES: "3"
  WEBHOOK_RETRY_DELAY: "5"
  WEBHOOK_TIMEOUT: "30"

  # Security
  ALLOWED_ORIGINS: "http://frontend-student-teacher:3000,http://frontend-institutional,http://localhost:3000"
  CORS_ENABLED: "true"

  # Logging
  LOG_LEVEL: "INFO"
  LOG_FORMAT: "json"

  # Metrics
  METRICS_ENABLED: "true"
  HEALTH_CHECK_PATH: "/health"
